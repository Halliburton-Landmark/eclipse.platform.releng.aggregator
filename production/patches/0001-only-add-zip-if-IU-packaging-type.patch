From d80832364c24b40602493d7b9f26e4c809260d62 Mon Sep 17 00:00:00 2001
From: Pascal Rapicault <pascal@rapicorp.com>
Date: Fri, 13 Mar 2015 10:58:58 -0400
Subject: [PATCH] only add zip if IU packaging type

---
 .../src/main/java/org/eclipse/tycho/plugins/p2/P2MetadataMojo.java  | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/tycho-p2/tycho-p2-plugin/src/main/java/org/eclipse/tycho/plugins/p2/P2MetadataMojo.java b/tycho-p2/tycho-p2-plugin/src/main/java/org/eclipse/tycho/plugins/p2/P2MetadataMojo.java
index 63df0d3..33fd830 100644
--- a/tycho-p2/tycho-p2-plugin/src/main/java/org/eclipse/tycho/plugins/p2/P2MetadataMojo.java
+++ b/tycho-p2/tycho-p2-plugin/src/main/java/org/eclipse/tycho/plugins/p2/P2MetadataMojo.java
@@ -131,9 +131,9 @@ public class P2MetadataMojo extends AbstractMojo {
             artifacts.add(projectDefaultArtifact);
 
             for (Artifact attachedArtifact : project.getAttachedArtifacts()) {
-                if (attachedArtifact.getFile() != null
-                        && (attachedArtifact.getFile().getName().endsWith(".jar") || attachedArtifact.getFile()
-                                .getName().endsWith(".zip"))) {
+                if (attachedArtifact.getFile() != null && (attachedArtifact.getFile().getName().endsWith(".jar")
+                        || (attachedArtifact.getFile().getName().endsWith(".zip")
+                                && project.getPackaging().equals("p2-installable-unit")))) {
                     artifacts.add(new ArtifactFacade(attachedArtifact));
                 }
             }
-- 
1.9.1

